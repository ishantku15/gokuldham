<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Gokuldham.fun | Play TMKOC Games Online & Chat with AI Characters</title>
    
    <meta name="title" content="Gokuldham.fun | Play TMKOC Games Online & Chat with AI Characters">
    <meta name="description" content="Play the best free online Taarak Mehta Ka Ooltah Chashmah games! Help Jethalal run, deliver achaar with Bhide, and chat with AI Mehta Sahab & Bapuji. No download required. The ultimate fan arcade.">
    
    <meta name="keywords" content="TMKOC games, Taarak Mehta Ka Ooltah Chashmah game, Jethalal game download, Gokuldham society 3D, free browser games, Indian arcade, Bhide scooter game, Popatlal marriage game, Tapu Sena, play online free, Hindi games, AI character chat, Jethalal voice AI, Champaklal Gada">
    
    <meta name="robots" content="index, follow">
    <meta name="author" content="Ishant Webworks">
    <meta name="language" content="English">
    <link rel="canonical" href="https://gokuldham.fun/">
    
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gokuldham.fun/">
    <meta property="og:title" content="Play TMKOC Games & Chat with AI Jethalal!">
    <meta property="og:description" content="Join the Gokuldham Society fun. Play arcade games featuring Jethalal, Bhide, and Popatlal. Get advice from AI Mehta Sahab.">
    <meta property="og:image" content="https://gokuldham.fun/logo.png">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://gokuldham.fun/">
    <meta property="twitter:title" content="Gokuldham.fun - The TMKOC Arcade">
    <meta property="twitter:description" content="Play free TMKOC games online. Run from Bapuji and deliver pickles with Bhide!">
    <meta property="twitter:image" content="https://gokuldham.fun/logo.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #FFFBEB;
            background-image: radial-gradient(#FCD34D 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .comic-font {
            font-family: 'Comic Neue', cursive;
        }
        .game-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-origin: center;
        }
        .game-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.2);
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #F59E0B;
            border-radius: 4px;
        }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
        }
        /* Animations */
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(5%); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 5px rgba(245, 158, 11, 0.5); }
            50% { box-shadow: 0 0 25px rgba(245, 158, 11, 0.9); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-bounce-slow { animation: bounce-slow 3s infinite; }
        .animate-float { animation: float 5s ease-in-out infinite; }
        .animate-pulse-glow { animation: pulse-glow 3s ease-in-out infinite; }
        .animate-shake { animation: shake 0.8s ease-in-out; }
        .animate-fade-in-up { animation: fadeInUp 0.8s ease-out; }
        .animate-spin-slow { animation: spin-slow 8s linear infinite; }
        .animate-slide-down { animation: slideDown 0.3s ease-out; }
        
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #F59E0B;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .btn-press { transition: all 0.1s ease; }
        .btn-press:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
        }
        .character-card { transition: all 0.3s ease; }
        .character-card:hover { transform: scale(1.05) rotate(2deg); }
        
        /* Mobile Menu Styles */
        .mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease-out;
        }
        .mobile-menu.open {
            transform: translateX(0);
        }
        .menu-overlay {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
        }
        .menu-overlay.open {
            opacity: 1;
            visibility: visible;
        }
        
        /* Coming Soon Overlay */
        .coming-soon-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 1rem;
            z-index: 10;
            color: white;
            text-align: center;
            padding: 1rem;
        }
        .coming-soon-overlay h3 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #FCD34D;
        }
        .coming-soon-overlay p {
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="text-gray-800 selection:bg-yellow-300 selection:text-yellow-900">

    <audio id="bgMusic" loop>
        <source src="https://ia801600.us.archive.org/12/items/TaarakMehtaKaOoltahChashmahTitleSong/Taarak%20Mehta%20Ka%20Ooltah%20Chashmah%20Title%20Song.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Mobile Menu Overlay -->
    <div id="menuOverlay" class="menu-overlay fixed inset-0 bg-black bg-opacity-70 z-40"></div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu fixed top-0 right-0 h-full w-64 bg-white z-50 shadow-2xl overflow-y-auto">
        <div class="p-4 flex justify-between items-center border-b border-gray-200">
            <span class="text-lg font-bold text-red-600">Menu</span>
            <button id="closeMenuBtn" class="text-gray-500 hover:text-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <nav class="p-4">
            <ul class="space-y-4">
                <li><a href="index.html" class="block py-2 px-4 bg-yellow-100 rounded-lg text-yellow-800 font-medium">Home</a></li>
                <li><a href="about.html" class="block py-2 px-4 hover:bg-gray-100 rounded-lg transition">About Us</a></li>
                <li><a href="store.html" class="block py-2 px-4 hover:bg-gray-100 rounded-lg transition">Store</a></li>
                <li><a href="contact.html" class="block py-2 px-4 hover:bg-gray-100 rounded-lg transition">Contact</a></li>
                <li><a href="#games" class="block py-2 px-4 hover:bg-gray-100 rounded-lg transition">Games</a></li>
                <li><a href="#ai-chat" class="block py-2 px-4 hover:bg-gray-100 rounded-lg transition">AI Chat ‚ú®</a></li>
            </ul>
        </nav>
    </div>

    <nav class="bg-yellow-400 border-b-4 border-yellow-600 sticky top-0 z-50 shadow-lg animate-fade-in-up">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2 md:space-x-4">
                    <a href="index.html" class="bg-white p-1 rounded-lg border-2 border-black shadow-sm animate-pulse-glow block">
                        <img 
                            src="logo.png" 
                            alt="Gokuldham Fun Website Logo" 
                            class="h-8 md:h-12 w-auto object-contain"
                            width="48"
                            height="48"
                            onerror="this.src='https://upload.wikimedia.org/wikipedia/en/c/c7/Taarak_Mehta_Ka_Ooltah_Chashmah_Logo.png'"
                        >
                    </a>
                    <span class="text-lg md:text-2xl font-extrabold tracking-tight text-red-600 comic-font leading-tight">Gokuldham<span class="text-blue-600">.fun</span></span>
                </div>
                
                <div class="flex items-center space-x-2 md:space-x-4">
                    <button onclick="toggleMusic()" id="musicBtn" aria-label="Toggle Background Music" class="bg-yellow-600 hover:bg-yellow-700 text-white text-xs md:text-base font-bold py-1 px-3 md:py-2 md:px-4 rounded-full shadow border-b-2 border-yellow-800 transition flex items-center gap-1 md:gap-2 btn-press">
                        <span>üîá</span> <span class="hidden md:inline">Music Off</span>
                    </button>

                    <!-- Desktop Navigation -->
                    <div class="hidden md:flex space-x-4 font-bold text-yellow-900">
                        <a href="index.html" class="hover:text-white transition">Home</a>
                        <a href="about.html" class="hover:text-white transition">About Us</a>
                        <a href="store.html" class="hover:text-white transition">Store</a>
                        <a href="contact.html" class="hover:text-white transition">Contact</a>
                        <a href="#games" class="hover:text-white transition">Games</a>
                        <a href="#ai-chat" class="hover:text-white transition">AI Chat ‚ú®</a>
                    </div>
                    
                    <!-- Mobile Menu Button -->
                    <button id="menuBtn" class="md:hidden text-yellow-900 hover:text-white focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <header class="bg-blue-500 text-white overflow-hidden relative">
        <div class="absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
        <div class="max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center relative z-10">
            <div class="md:w-1/2 text-center md:text-left mb-8 md:mb-0 animate-fade-in-up">
                <h1 class="text-3xl md:text-6xl font-extrabold mb-4 text-yellow-300 drop-shadow-md">Ooltah Chashmah, <br><span class="text-white">Seedha Fun!</span></h1>
                <p class="text-lg md:text-xl mb-6 font-medium">Welcome to the #1 TMKOC Fan Arcade. Play games, challenge friends, and get advice from society members!</p>
                <a href="#games" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition hover:scale-105 border-b-4 border-red-700 inline-block animate-float btn-press">
                    Play Free Games üéÆ
                </a>
            </div>
            <div class="md:w-1/2 flex justify-center relative">
                <div class="relative w-48 h-48 md:w-64 md:h-64 bg-white rounded-full flex items-center justify-center border-8 border-yellow-400 shadow-2xl animate-bounce-slow">
                    <img src="logo.png" class="w-32 md:w-48 opacity-90" alt="Gokuldham Mascot" width="192" height="192" onerror="this.src='https://upload.wikimedia.org/wikipedia/en/c/c7/Taarak_Mehta_Ka_Ooltah_Chashmah_Logo.png'">
                    <div class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-10 h-10 flex items-center justify-center shadow-lg animate-spin-slow">
                        <i class="fas fa-gamepad"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section id="ai-chat" class="max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8 bg-yellow-50 rounded-3xl mt-8 border-4 border-yellow-200 relative">
        <!-- Coming Soon Overlay -->
        <div class="coming-soon-overlay">
            <h3>Coming Soon!</h3>
            <p>Our AI Chat feature is under development</p>
            <p>Stay tuned for updates!</p>
            <div class="text-4xl mt-2">üöß</div>
        </div>
        
        <div class="text-center mb-8 md:mb-12">
            <h2 class="text-2xl md:text-4xl font-extrabold text-indigo-900 inline-block border-b-4 border-indigo-400 pb-2 animate-fade-in-up">
                Ask The Elders ‚ú®
            </h2>
            <p class="mt-4 text-gray-600">Experience the power of AI with your favorite Gokuldham residents.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
            
            <div class="character-card bg-white p-6 rounded-2xl shadow-lg border-l-8 border-indigo-500 flex flex-col items-center text-center">
                <div class="w-32 h-32 mb-4 rounded-full overflow-hidden border-4 border-indigo-100 bg-indigo-50">
                    <img src="mehta.png" loading="lazy" alt="Chat with Taarak Mehta AI" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/150?text=Mehta+Sahab'">
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">Ask Mehta Sahab</h3>
                <p class="text-gray-600 text-sm mb-4">Stuck in life? Get wise advice and a 'Shayari' from Jethalal's Fire Brigade.</p>
                <button onclick="openGeminiFeature('taarak')" class="mt-auto bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-8 rounded-full shadow-md w-full md:w-auto transition-all duration-300 btn-press">
                    Get Advice ‚ú®
                </button>
            </div>

            <div class="character-card bg-white p-6 rounded-2xl shadow-lg border-l-8 border-orange-500 flex flex-col items-center text-center">
                <div class="w-32 h-32 mb-4 rounded-full overflow-hidden border-4 border-orange-100 bg-orange-50">
                    <img src="bapuji.png" loading="lazy" alt="Chat with Champaklal Gada AI" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/150?text=Bapuji'">
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">Bapuji's Sanskar</h3>
                <p class="text-gray-600 text-sm mb-4">Feeling lazy? Confess to Champaklal and get a "Babuchak" scolding + wisdom.</p>
                <button onclick="openGeminiFeature('bapuji')" class="mt-auto bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-8 rounded-full shadow-md w-full md:w-auto transition-all duration-300 btn-press">
                    Get Wisdom ‚ú®
                </button>
            </div>

        </div>
    </section>

    <section id="games" class="max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 inline-block border-b-4 border-yellow-400 pb-2 animate-fade-in-up">Game Library</h2>
            <p class="mt-4 text-lg text-gray-600">Click Play to launch games in new tabs!</p>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
            
            <div class="game-card bg-white rounded-2xl overflow-hidden shadow-lg border-2 border-gray-100 flex flex-col h-full">
                <div class="h-40 md:h-48 bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-black opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                    <img src="games/game1/1.jpeg" loading="lazy" alt="Run Jetha Run Game Thumbnail" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" onerror="this.style.display='none'; document.querySelector('.fallback-text').style.display='block'">
                    <span class="fallback-text text-4xl text-white font-bold absolute hidden">Run Jetha Run</span>
                </div>
                <div class="p-6 flex-1 flex flex-col">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Run Jetha Run: The Chappal Chase</h3>
                    <p class="text-gray-600 mb-4 text-sm">Bapuji is Angry! Dodge obstacles and run through the Gokuldham society.</p>
                    <div class="mt-auto">
                        <button onclick="playGame('games/game1/index.html')" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-xl shadow transition border-b-4 border-blue-700 btn-press">
                            Play Now
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="game-card bg-white rounded-2xl overflow-hidden shadow-lg border-2 border-gray-100 flex flex-col h-full">
                <div class="h-40 md:h-48 bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-black opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                    <img src="games/game2/1.jpeg" loading="lazy" alt="Bhide Scooter Game Thumbnail" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
                    <span class="text-4xl text-white font-bold absolute hidden">Bhide's Rush</span>
                </div>
                <div class="p-6 flex-1 flex flex-col">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Bhide's Sakharam Rush</h3>
                    <p class="text-gray-600 mb-4 text-sm">Help Atmaram Tukaram Bhide deliver his famous Madhavi's Achar & Papad on time!</p>
                    <div class="mt-auto">
                        <button onclick="playGame('games/game2/index.html')" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl shadow transition border-b-4 border-green-700 btn-press">
                            Play Now
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <div id="geminiModal" class="fixed inset-0 modal-backdrop z-50 hidden flex items-center justify-center p-4" role="dialog" aria-modal="true">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up">
            <div class="bg-indigo-900 text-white p-4 flex justify-between items-center">
                <h3 id="geminiModalTitle" class="text-xl font-bold text-yellow-400 flex items-center gap-2">
                    <span>‚ú®</span> AI Feature
                </h3>
                <button onclick="closeGeminiFeature()" aria-label="Close Modal" class="text-gray-400 hover:text-white focus:outline-none transition btn-press">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <div class="p-6 flex-1 overflow-y-auto bg-gray-50">
                <div class="text-center mb-6">
                    <span id="geminiIcon" class="text-6xl block mb-2">ü§ñ</span>
                    <p id="geminiDesc" class="text-gray-600">Description goes here.</p>
                </div>

                <div id="geminiInputArea" class="mb-6">
                    <label id="geminiLabel" class="block text-gray-700 text-sm font-bold mb-2" for="geminiInput">
                        Tell us about yourself:
                    </label>
                    <textarea id="geminiInput" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 transition" rows="3" placeholder="Type here..."></textarea>
                    <button onclick="triggerGemini()" class="mt-4 w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-3 px-4 rounded-lg shadow-lg transform transition hover:scale-105 duration-300 btn-press">
                        Generate Magic ‚ú®
                    </button>
                </div>

                <div id="geminiLoading" class="hidden flex-col items-center justify-center py-8">
                    <div class="loader mb-4"></div>
                    <p class="text-gray-500 animate-pulse">Connecting to Gokuldham...</p>
                </div>

                <div id="geminiResult" class="hidden bg-white border-l-4 border-yellow-400 p-4 rounded shadow-sm">
                    <p id="geminiOutput" class="text-gray-800 whitespace-pre-wrap font-medium"></p>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-gray-900 text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="font-comic text-xl mb-2 text-yellow-400">Gokuldham Society</p>
            <p class="text-gray-500 text-sm">Made for fun. Not affiliated with the official show (Neela Tele Films). Just a fan tribute!</p>
            <div class="mt-4 text-2xl space-x-4">
                <span role="img" aria-label="glasses">üëì</span>
                <span role="img" aria-label="sari">üëò</span>
                <span role="img" aria-label="cricket">üèè</span>
            </div>
            <div class="mt-6 pt-4 border-t border-gray-700">
                <p class="text-gray-400 text-sm">
                    Website created by 
                    <a href="https://ishant.shop" target="_blank" rel="noopener" class="text-yellow-400 hover:text-yellow-300 transition-colors duration-200 font-medium">
                        Ishant Webworks
                    </a>
                </p>
            </div>
        </div>
    </footer>

    <script>
        // --- MOBILE MENU FUNCTIONALITY ---
        const menuBtn = document.getElementById('menuBtn');
        const closeMenuBtn = document.getElementById('closeMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        const menuOverlay = document.getElementById('menuOverlay');
        
        function toggleMobileMenu() {
            mobileMenu.classList.toggle('open');
            menuOverlay.classList.toggle('open');
            document.body.style.overflow = mobileMenu.classList.contains('open') ? 'hidden' : '';
        }
        
        menuBtn.addEventListener('click', toggleMobileMenu);
        closeMenuBtn.addEventListener('click', toggleMobileMenu);
        menuOverlay.addEventListener('click', toggleMobileMenu);
        
        // Close menu when clicking on a link
        document.querySelectorAll('#mobileMenu a').forEach(link => {
            link.addEventListener('click', toggleMobileMenu);
        });

        // --- GEMINI API CONFIG ---
        const apiKey = "AIzaSyAagjN6x-lT577b7zcrYj9CPK1xSbmEJ6Q"; 
        
        let currentGeminiMode = ''; 

        function openGeminiFeature(mode) {
            // Show coming soon message instead of opening the AI modal
            alert("üöß AI Chat feature is coming soon! üöß\n\nWe're working hard to bring you the ability to chat with Mehta Sahab and Bapuji. Stay tuned for updates!");
            return;
            
            // The rest of the original function is commented out
            /*
            currentGeminiMode = mode;
            const modal = document.getElementById('geminiModal');
            const title = document.getElementById('geminiModalTitle');
            const icon = document.getElementById('geminiIcon');
            const desc = document.getElementById('geminiDesc');
            const label = document.getElementById('geminiLabel');
            const input = document.getElementById('geminiInput');
            const result = document.getElementById('geminiResult');
            const loading = document.getElementById('geminiLoading');

            modal.classList.remove('hidden');
            result.classList.add('hidden');
            loading.classList.add('hidden');
            input.value = '';

            if (mode === 'taarak') {
                title.innerHTML = "<span>üñäÔ∏è</span> Ask Mehta Sahab";
                icon.innerText = "üñäÔ∏è";
                desc.innerText = "Ask the Fire Brigade for advice on any life problem.";
                label.innerText = "What is your problem?";
                input.placeholder = "e.g. My boss shouts at me...";
            } else if (mode === 'bapuji') {
                title.innerHTML = "<span>üë¥</span> Bapuji's Sanskar";
                icon.innerText = "üë¥";
                desc.innerText = "Get a life lesson (and a scolding) from Champaklal Gada.";
                label.innerText = "Confess your laziness/mistake:";
                input.placeholder = "e.g. I woke up at 11 AM today...";
            }
            */
        }

        function closeGeminiFeature() {
            document.getElementById('geminiModal').classList.add('hidden');
        }

        async function triggerGemini() {
            const input = document.getElementById('geminiInput').value;
            if (!input.trim()) {
                document.getElementById('geminiInput').classList.add('animate-shake');
                setTimeout(() => {
                    document.getElementById('geminiInput').classList.remove('animate-shake');
                }, 800);
                return;
            }

            const loading = document.getElementById('geminiLoading');
            const resultArea = document.getElementById('geminiResult');
            const output = document.getElementById('geminiOutput');

            loading.classList.remove('hidden');
            resultArea.classList.add('hidden');
            
            let prompt = "";
            if (currentGeminiMode === 'taarak') {
                prompt = `You are Taarak Mehta from TMKOC. User problem: "${input}". Give wise advice and a Hindi Shayari. Keep it under 100 words.`;
            } else if (currentGeminiMode === 'bapuji') {
                prompt = `You are Champaklal Gada (Bapuji). User confesses: "${input}". Scold them using words like "Babuchak" or "Gadheda". Then give a short, sweet moral lesson about life/family.`;
            }

            // FIXED: Using the stable gemini-1.5-flash model
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        contents: [{ parts: [{ text: prompt }] }] 
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error("API Error Details:", errorData);
                    throw new Error(`API Request Failed: ${response.status}`);
                }

                const data = await response.json();
                const text = data.candidates?.[0]?.content?.parts?.[0]?.text || "Error generating response.";

                loading.classList.add('hidden');
                resultArea.classList.remove('hidden');
                output.innerText = text;
            } catch (error) {
                console.error("Full Error:", error);
                loading.classList.add('hidden');
                resultArea.classList.remove('hidden');
                output.innerText = "Arre bapre! Connection failed. Please check if your API Key is valid and you have internet.";
            }
        }

        // --- Global UI Logic ---
        const bgMusic = document.getElementById('bgMusic');
        let isMusicPlaying = false;

        function toggleMusic() {
            const btn = document.getElementById('musicBtn');
            if (isMusicPlaying) {
                bgMusic.pause();
                btn.innerHTML = '<span>üîá</span> <span class="hidden md:inline">Music Off</span>';
                btn.classList.replace('bg-green-600', 'bg-yellow-600');
                btn.classList.replace('hover:bg-green-700', 'hover:bg-yellow-700');
            } else {
                bgMusic.play().catch(e => console.log("User interaction needed first"));
                btn.innerHTML = '<span>üîä</span> <span class="hidden md:inline">Music On</span>';
                btn.classList.replace('bg-yellow-600', 'bg-green-600');
                btn.classList.replace('hover:bg-yellow-700', 'hover:bg-green-700');
            }
            isMusicPlaying = !isMusicPlaying;
        }

        function playGame(path) {
            window.open(path, '_blank');
        }

        // Add scroll animations
        document.addEventListener('DOMContentLoaded', function() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeInUp 0.8s ease-out forwards';
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.game-card, .character-card').forEach(card => {
                card.style.opacity = '0';
                observer.observe(card);
            });
        });
    </script>
</body>
</html>